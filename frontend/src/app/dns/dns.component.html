<div class="dns container">
  <div *ngIf="loading">
    <div class="d-flex justify-content-center">
      <div class="spinner-grow text-primary" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  </div>
  <div *ngIf="!loading" class="card text-white bg-dark">
    <div class="card-header">
      DNS entries:
    </div>
    <div *ngIf="!loading && user.dns.length == 0" class="card-body">
      No dns entries
    </div>
    <div *ngIf="!loading && user.dns.length != 0" class="card-body">
      <table class="table table-dark" *ngIf="user.dns.length !=0">
        <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Host</th>
          <th scope="col">Destination</th>
          <th scope="col">Manage</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let dns of user.dns">
          <th scope="row">{{dns.id}}</th>
          <td><a href="http://{{dns.entry}}.h.minet.net">{{dns.entry}}</a></td>
          <td>{{dns.ip}}</td>
          <td><button class="btn-sm btn-danger" (click)="delete_entry(dns.id)">Delete</button></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <button *ngIf="!loading" class="btn btn-primary" (click)="showForm = !showForm">New</button>


  <div *ngIf="showForm" class="card text-white bg-dark mb-3">
    <div class="card-body">
      <div>

        <form (ngSubmit)="create_dns(newDns)" #vmForm="ngForm">
          <div *ngIf="vmForm.submitted">
            Form has been submitted
          </div>

          <div class="alert-success" *ngIf="success">
            You entry has been created
          </div>

          <div *ngIf="!vmForm.submitted">

            <div>

              <div class="form-group">
                <label for="dnsEntry">Entry</label>
                <input type="text" class="form-control" id="dnsEntry"
                       [(ngModel)]="newDns.entry" name="dnsEntry"
                       #entry="ngModel">
              </div>
              <span id="textHelpBlock" class="form-text text-muted">Url will be: {{newDns.entry | slugify}}
                .hosting.minet.net</span>
              <div [hidden]="entry.valid || entry.pristine" class="alert alert-danger">
                Entry is required
              </div>


              <div class="form-group">
                <label for="ip">IP to web server</label>
                <input type="text" class="form-control" id="ip"
                       [(ngModel)]="newDns.ip" name="ip"
                       required="required"
                       #ip="ngModel">
              </div>
              <div [hidden]="ip.valid || ip.pristine" class="alert alert-danger">
                IP is required
              </div>

            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>
